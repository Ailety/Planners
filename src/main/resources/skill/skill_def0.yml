__option__:
  name: '疾风斩击'
  triggers: [ player attack ]
  async: true
  upgrade-condition:
    - $: 0
      if: check profile level >= 1
      talk: tell 该技能需要1级才可以学习
    - $: 1
      if: check vault has 100
      consume: vault take 100
      placeholder: '金币未满足100({{ vault get }})'
  icon:
    material: WOODEN_SWORD
    name: "&e{{ meta skill name }}"
    lore:
      - '&f技能等级 &a{{ meta skill level }}'
      - ''
      - '&f冷却时间 &a{{ lazy cooldown }}'
      - '&f蓝量消耗 &a{{ lazy mp }}'
      - ''
      - '&f对前方敌人造成&a{{ lazy attackCount }}&f段伤害,每段造成&a{{ lazy base }}'
      - ''

  variables:
    cooldown: math meta skill level * 10
    mp: math meta skill level * 2.8
    damage: math lazy base * 1.2"
    attackCount: math meta skill level * 2
    upgradePoint: math meta skill level * 2
    base: 10
action: |-
  set loc to executor loc
  meta origin set executor loc
  title "陷阱" subtitle "已安放" by 20 60 20
  async {

    for i in range 1 to 3 then {
      effect circle inline "CLOUD 0 0 0 -step 10 -radius 4 -speed 0.0 -count 10 -@loc {{ &loc }}"
      effect circle inline "CLOUD 0 0 0 -step 10 -radius 3 -speed 0.0 -count 10 -@loc {{ &loc }}"
      effect circle inline "CLOUD 0 0 0 -step 10 -radius 2 -speed 0.0 -count 10 -@loc {{ &loc }}"
      effect circle inline "CLOUD 0 0 0 -step 10 -radius 1 -speed 0.0 -count 10 -@loc {{ &loc }} -onCapture t0"
      sleep 1s
    }

  }
  async {
    for i in range 1 to 8 then {
      selector t0 to "-@range 4,4,4 -@their"
      if check selector t0 size >= 1 then {
        damage 2 false "-@fetch t0"
        print "break for"
        exit success
      }
      sleep 1s
    }

  }

  sleep 8s